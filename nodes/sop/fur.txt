= Fur =

#type: node
#context: sop
#internal: fur
#icon: SOP/fur
#tags: fur, curves

"""Создает массив кривых на поверхности, являющийся волосами."""

Нода Fur создает массив кривых для отображения волос, растущих на поверхности полигонов или на облаке точек. Шейдеры CVEX могут применяться для управления атрибутами и формой генерируемых кривых.

Когда мы имеем дело с полигональной поверхостью, число генерируемых кривых является результатом плотности, умноженной на площадь полигонов геометрии кожи. Площадь полигонов берется из дополнительного атрибута `area` или рассчитывается из позиций вершин, описанных дополнительным атрибутом `rest`, или из позиций точек.

Также можно сгенерировать волосы на позициях корней. Например, с помощью облака точек, подключенного к первому входу. В этом случае необходимо будет указать атрибут нормалей (`N`) и направление кривых в сотоянии покоя (` restxdir`, `restydir` и` restzdir`).

В дополнительный второй вход подаются направляющие кривые. Для определения формы генерируемых кривых происходит интерполяция направляющих кривых (до применения шейдеров CVEX), игнорируя __Length__ и __Vertices__, в ноде Fur. Необходимо указать векторный (Float3) атрибут примитива `guideorigin` на исходной геометрии направляющих кривых, чтобы интерполировать местоположение. Если присутствует атрибут `guideorigin`, то __Guide Radius__ будет определять зону влияния каждой направляющей кривой.

В дополнительный третий вход подаются кривые, необходимые для определения прядей. Атрибуты `clumporigin` и `clumpradius` на этих кривых необходимы для сопоставления каждой сгенерированной кривой с кривой пряди.

Дополнительный четвертый вход предназначен для линий разделения, которые могут пригодиться для создания проборов.

@attributes

Нода Fur использует следующие атрибуты для входных геометрий.

Имя ||
    Источник ||
        Класс ||
            Тип ||
                Описание ||
    
`area` |
    Skin |
        Primitive |
            Float |
                В этом атрибуте содержится площадь каждого полигона геометрии кожи. От него зависит количество кривых, сгенерированных примитивом. Этот атрибут не является обязательным, но в случае отсутствия площадь каждого примитива будет вычисляться.
`clumporigin` |
    Clumps |
        Primitive |
            Float3 |
                Содержит данные о том, где будет создана каждая прядь на коже в состоянии покоя.
`clumpradius` |
    Clumps |
        Primitive |
            Float |
                Максимальное расстояние от начала формирования пряди до того места, где направляющие волос еще будут ей принадлежать.
`furdensity` |
    Skin |
        Any |
            Float |
                Этот атрибут используется как скалярный множитель для параметра __Density__ и влияет на количество сгенерированных кривых. Если это значение уменьшено с помощью шейдера CVEX, некоторые кривые будут удалены, чтобы соответствовать пониженному значению плотности. Этот атрибут является необязательным, и если отсутствует, то используется значение 1.
                
`guideorigin` |
    Guides |
        Primitive |
            Float3 |
                Описывает, где создается каждая направляющая на коже в состоянии покоя.
`guideradius` |
    Guides |
        Primitive |
            Float |
                Максимальное расстояние на которое направляющая будет воздействовать на сгенерированные направляющие волос.
`N` |
    Skin |
        Point |
            Float3 |
                Если не используются направляющие волос, то этот атрибут описывает направление роста генерируемых кривых.
`rest` |
    Skin |
        Point or Vertex |
            Float3 |
                Этот атрибут описывает позицию каждой точки на геометрии кожи в состоянии покоя. Это влияет на вычисление площади каждого полигона при определении числа сгенерированных кривых. Это значение также используется для сопоставления каждой сгенерированной кривой с прядью. Этот атрибут является необязательным, и если отсутствует, то используется позиция точки.


Нода Fur делает доступными для шейдеров CVEX следующие специальные атрибуты:

Имя ||
    Класс ||
        Тип ||
            Описание ||

`clumpP` |
    Vertex |
        Float3 |
            Описывает положение каждой вершины в кривых связанных с прядью волос. Этот атрибут доступен только в Guide Shader. 
`clumproot` |
    Primitive |
        Float3 |
            Описывает позицию на поверхности кожи, из которой растет отдельная прядь волос.
`hairid` |
    Primitive |
        Integer |
            Содержит уникальный идентификатор для каждой сгенерированной кривой. Это атрибут предназначен только для чтения.
`hairroot` |
    Primitive |
        Float3 |
            Описывает позицию на поверхности кожи, из которой растет отдельный волос.
`hairdist` |
    Vertex |
        Float |
            Описывает параметризованное расстояние каждой вершины вдоль кривой в диапазоне `[0, 1]`. Этот атрибут доступен только в Guide Shader.
 `P` |
    Point |
        (point position) |
            Описывает позицию каждой вершины на сгенерированных волосах. Этот атрибут доступен только в Guide Shader.
`restxdir` |
    Primitive |
        Float3 |
            Описывает направление оси x атрибута `rest` в координатах мирового пространства. Нода Fur предоставляет это значение только в том случае, если поверхностные полигоны используются для описания геометрии кожи. 
`restydir` |
    Primitive |
        Float3 |
            Описывает направление оси y атрибута `rest` в координатах мирового пространства. Нода Fur предоставляет это значение только в том случае, если поверхностные полигоны используются для описания геометрии кожи.
`restzdir` |
    Primitive |
        Float3 |
            Описывает направление оси z атрибута `rest` в координатах мирового пространства. Нода Fur предоставляет это значение только в том случае, если поверхностные полигоны используются для описания геометрии кожи. 

Ноду Fur можно использовать для интерполяции (и управления с использованием шейдеров CVEX) любого атрибута. Ниже перечислены некоторые связанные атрибуты, используемые мантрой. 

Имя ||
    Тип ||
        Описание ||
`orient` |
    Float3 |
        Описывает угол ориентации кривых, представленных на рендере как узкие полосы.
`width` |
    Float |
        Описывает ширину кривых на рендере.

@parameters

== Fur ==

Group:
    Группа примитивов геометрии кожи на которых будут сгенерированы волосы.

Primitive Type:
    Тип геометрии.

    Polygon:
	    Создает полилинию.
    NURBS:
	    Создает кривую NURBS.

Segments:
    Количество сегментов в каждой сгенерированной кривой (игнорируется, если геометрия подана на вход "Guides").

Length:
    Определяет длину сгенерированных кривых.

Seed:
    Значение seed для генератора случайных чисел.

Density:
    Количество сгенерированных кривых является результатом плотности, умноженной на площадь полигонов геометрии кожи. Значение этого параметра действует как скалярный множитель для дополнительного атрибута `furdensity` предназначенного для определения плотности кривых.

Display Ratio:
    Определяет коэффициент отображения кривых.

Guide Radius:
    Максимальное расстояние на которое направляющая будет воздействовать на сгенерированные направляющие волос.

Clump Radius:
    Максимальное расстояние на которое волос может быть от пряди, но все еще быть ее частью.

Use Closest Clump:
    Связывает каждый волос с ближайшей прядью.

Remove Unclumped Hairs:
    Удаляет волосы не связанные ни с одной прядью. 

Remove Unguided Hairs:
    Удаляет волосы на которые не влияют направляющие волос.

Parting Radius:
    Максимальное расстояние на которое волос может быть от разделяющей линии, но все еще находиться под ее влиянием.

== Attributes ==

=== Skin ===

Skin Shader:
    Параметр __Skin Shader__ ссылается на CVEX SHOP, необходимый для управления атрибутами, интерполированными из геометрии кожи. Каждый атрибут имеет единственное значение для каждой сгенерированной кривой. Уникальное значение для каждой кривой может быть получено с помощью чтения `hairid`. В случае переменной `furdensity` уменьшение значения приведет к удалению волос, однако увеличение значения не окажет никакого эффекта.

New Class:
	Класс для переданных атрибутов.

Skin Attributes:
	Задает список атрибутов из геометрии кожи, которые будут переданы сгенерированным кривым. Полученные значения атрибутов будут содержать любые изменения, сделанные шейдерами CVEX.

Set Hair ID:
	Создает атрибут `hairid`, содержащий уникальное значение для каждой сгенерированной кривой.

=== Guide ===

Guide Shader:
	Параметр __Guide Shader__ ссылается на CVEX SHOP, необходимый для управления атрибутами, интерполированными из геометрий направляющих и прядей. Каждый атрибут имеет отдельное значение для каждой вершины в сгенерированных кривых. Специальную переменную `P` можно использовать для управления позицией вершины.

New Class:
	Класс для переданных атрибутов.

Guide Attributes:
	Задает список атрибутов из направляющих кривых и прядей, которые будут переданы сгенерированным кривым. Полученные значения атрибутов будут содержать любые изменения, сделанные шейдерами CVEX.

:bubble:
    #dir: right
    #display: gray
    [English version of this page|http://www.sidefx.com/docs/houdini16.5/nodes/sop/fur.html]

@related
- [Node:sop/wireblend]

